<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Using Firewall Builder to Configure Router Access Lists</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

<style type="text/css">
<!--
.command {
    padding: 1em;
    border: 1px dashed #2f6fab;
    color: black;
    background-color: #f9f9f9;
    line-height: 1.1em;
        font-family: Courier New, Courier, mono;
        font-size: 12px;
        font-style: italic;
}

.system {
    color: black;
        font-family: Courier New, Courier, mono;
        font-size: 12px;
        font-style: italic;
}

.highlight {
    color: #FF0000;
  font-family: Georgia, "Times New Roman", Times, serif;
  font-size: 12px;
  text-decoration: underline;
}
-->
</style>
</head>
<body>

        <h2>Getting Started: Configuring Cisco Router ACL</h2>

        <center>
        <img src="example_router.png" />
        </center>

        <p>
        For the following sections we are going to assume that the following
        rules have been defined for the router configuration shown above.
        </p>

        <center>
        <img src="six_rules.png" />
        </center>

        <h2>Step 4: Compile and Install</h2>

        <p>
        In Firewall Builder the process of converting the rules from the
        Firewall Builder GUI syntax to the target device commands is called 
        <b>compiling</b> the configuration.
        </p>
        
        <p>
        To compile, click on the Compile icon which looks like a hammer 
        <img src="hammer_small.png" />.  If you 
        haven&#39;t saved your configuration file yet you will be asked to do so. After 
        you save your file a wizard will be displayed that lets you select which 
        firewall(s) you want to compile. In this example we are going to complie
        the firewall called <b>la-rtr-1</b> configured with the rules above. 
        </p>

        <p>
        If there aren&#39;t any errors, you should see some messages scroll by in the 
        main window and a message at the top left stating Success.
        </p>

        <p>
        To view the output of the compile, click on the button that says Inspect 
        Generated Files.  This will open the file that contains the commands in 
        Cisco command format.  Note that any line that starts with &#34;&#33;&#34; 
        is a comment.
        </p>

        <center>
        <img src="compiler_output.png" />
        </center>

        <p>
        The output from the compiler is automatically saved in a file in the same 
        directory as the data file that was used to create it. The generated files 
        are named with the firewall name and a .fw extension. In our example the 
        generated configuration file is called la-rtr-1.fw. You can copy and copy and 
        paste the commands from this file to your router or you can use the built-in 
        Firewall Builder installer.
        </p>

        <h4>Installing</h4>

        <p>
        Firewall Builder can install the generated configuration file for you 
        using SSH.  To use the installer we need to identify one of the router 
        interfaces as the &#34;Management Interface&#34;.  This tells Firewall Builder 
        which IP address to connect to on the router.
        </p>

        <p>
        Do this by double-clicking the firewall object to expand it, and then 
        double-clicking on the interface name that you want to assign as the 
        management interface.  In our case this is interface FastEthernet0/1 
        which is the interface connected to the internal network.
        </p>

        <center>
        <img src="set_mgmt_interface.png" />
        </center>

        <p>
        <b>CAUTION!</b> Any time you are changing access lists on your router 
        you face the risk of locking yourself out of the device.  Please be 
        careful to always inspect your access lists closely and make sure that 
        you will be able to access the router after the access list is installed.
        </p>

        <p>
        To install your access lists on the router, click on the install icon
        <img src="install_icon.png" />. This will
        bring up a wizard where you will select the firewall to install. Click
        Next > to install the selected firewall.
        </p>

        <center>
        <img src="install_checkbox.png" />
        </center>

        <p>
        Firewall Builder will compile your rules converting them in to
        Cisco access list command line format. After the compile completes 
        successfully click Next >. Enter your username, password and enable 
        password.
        </p>

        <center>
        <img src="install_screen.png" />
        </center>

        <p>
        After the access list configuration is installed you see a message
        at the bottom of the main window and the status indicator in the 
        upper left corner of the wizard will indicate if the installation
        was successful.
        </p>

        <center>
        <img src="install_success.png" />
        </center>

        <p>
        By default Firewall Builder will connect to your router using SSH and 
        send the commands line-by-line to the router. Depending on the size of
        your access lists this can be slow.  
        </p>

        <p>
        If your router is running IOS version 12.4 you can select an option to 
        have Firewall Builder scp the generated configuration file to the router 
        instead of applying it line-by-line. This is much faster and is recommended
        if your router supports it.
        </p>
            
        <p>
        This requires ssh version 2 to be enabled on the router and scp server 
        to be enabled. You can find complete instructions for enabling SCP 
        installation in the Firewall Builder  
        <a href="http://4.0/docs/users_guide/installer_on_ios.html?utm_source=web&utm_medium=howtoforge&utm_campaign=howto_cisco_router_acl">
        Users Guide</a>.
        </p>

  </body>
</html>
