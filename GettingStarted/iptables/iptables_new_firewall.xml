   <sect1 id="iptables_new_firewall">
   <title>Creating a Linux iptables Firewall</title>

    <para>
    To create a firewall object to represent your Linux iptables 
    firewall click on the “Create new firewall” icon on the main 
    window of Firewall Builder or right-click on the Firewalls system 
    folder in the object tree and select "New Firewall". Either of these 
    methods will launch a wizard that walks you through creating 
    your firewall object.
    </para>

    <para>
    Enter a name for the firewall object, in this example we will use
    <emphasis>linux-1</emphasis>. Change the drop down menu for software 
    that is running on the firewall to be “iptables”.
    </para>

  <figure id="create_iptables_fw">
    <title>New Firewall Dialog</title>      
    <graphic scale="50" fileref="images/create_iptables_fw.png" />
  </figure> 

    <para>
    Click the "Next >" button to continue to the next step in the wizard.
    </para>

    <para>
    When creating a firewall in Firewall Builder you have a choice of
    configuring interfaces manually, or you can use SNMP discovery if you
    have SNMP enabled on your firewall and you have know the Read-Only or
    Read-Write community string. For this example we are going to configure
    the firewall interfaces manually.
    </para>

  <figure id="iptables_interface_discovery">
    <title>Select Interface Configuration Method</title>      
    <graphic scale="50" fileref="images/interface_discovery.png" />
  </figure> 

    <para>
    Click the "Next >" button to continue to the next step.
    </para>

    <para>
    The firewall that you create in Firewall Builder needs to match the 
    Linux server that you want to deploy the iptables rules on. 
    This means that the <emphasis>interface names</emphasis> and 
    <emphasis>IP addresses</emphasis> in the firewall object that you are
    creating must <emphasis>match exactly</emphasis> to what is configured 
    on the Linux server.
    </para>

    <para>
    Click the green <imagedata fileref="images/green_plus.png" /> 
    icon to add a new interface to the firewall.  Enter the name of the 
    interface exactly as it is shown on the Linux server when 
    you run the “ifconfig" command. In our example the interfaces are
    eth0, eth1 and lo.
    </para>

    <para>
    Set the interface name as eth0 and set the label to outside. 
    Click on the Add address button and set the IP address to 192.0.2.1 
    with a netmask of 255.255.255.240.
    </para>

  <figure id="iptables_interface_address">
    <title>Set Interface IP Address</title>      
    <graphic scale="50" fileref="images/iptables_interface_address.png" />
  </figure> 

    <para>
    Click the green <imagedata fileref="images/green_plus.png" /> 
    icon to add another interface to the firewall.  Enter the 
    information in to the wizard to match the second interface as 
    follows:
    </para>
       
  <figure id="iptables_interface_address2">
    <title>Interface Tabs</title>      
    <graphic scale="50" fileref="images/iptables_interface_address2.png" />
  </figure> 

    <para>
    Click the green <imagedata fileref="images/green_plus.png" /> 
    icon to add another interface to the firewall. Enter the 
    information for the "lo" interface with label "loopback",  
    IP address 127.0.0.1 and netmask 255.0.0.0. 
    </para>

    <para>
    Click the "Finish >" button to create the firewall object.
    </para>

    <para>
    After you create the firewall object representing the Linux server 
    the firewall object will be displayed in the object tree on the 
    left side. The Policy object, which is where the iptables rules 
    are configured, is automatically opened in the main window.
    </para>

  <figure id="iptables_firewall_object_tree">
    <title>Firewall Displayed in Object Tree</title>      
    <graphic scale="50" fileref="images/iptables_firewall_object_tree.png" />
  </figure> 

    <para>
    Before moving on you should save our data file that contains the new
    firewall object that you just created.  Do this by going to the
    File -> Save As menu item.  Choose a name and location to save the
    file.
    </para>

</sect1>

