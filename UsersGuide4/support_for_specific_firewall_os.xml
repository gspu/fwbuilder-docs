<?xml version="1.0"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
          "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">

<chapter id="support-for-os">
  <title>Support for the specific OS and distributions running on the
  firewall machine</title>

  <para>
    Firewall Builder can generate firewall script in the format
    tailored for specific OS or distributions running on the
    firewall. This helps integrate generated firewall configuration
    with startup scripts and other parts of the system-wide
    configuration of the OS running on the firewall. As of v4.0,
    Firewall Builder comes with such support OpenWRT and Sveasoft
    firmwares for small firewall appliances (Linksys, DLink and
    others), it also has experimental integration with IPCOP and
    derivatives. Integration with Secunet Wall firewall is provided
    and supported by Security Networks AG, Germany.
  </para>

  <para>
    Script generated by fwbuilder can have different format or even
    add or skip certain parts depending on the chosen target firewall
    OS. You can switch from one OS to another using "Host OS" setting
    in the firewall object dialog.
  </para>

  <sect1>
    <title>Integration with generic Linux OS</title>

    <para>
    </para>
  </sect1>


  <sect1>
    <title>Integration with OpenWRT</title>

    <para>
      To use fwbuilder
      with <ulink url="http://openwrt.org/">OpenWRT</ulink> you need
      to install the following packages on the firewall using command
      <command>"ipkg install package.ipk"</command>:
    </para>

    <itemizedlist>
      <listitem> <para> ip </para> </listitem>

      <listitem> <para> ip6tables (if you need IPv6) </para> </listitem>

      <listitem> <para> iptables-mod-extra </para> </listitem>

      <listitem> <para> iptables-utils </para> </listitem>

      <listitem> <para> kmod-ipt-extra </para> </listitem>
    </itemizedlist>

    <note>
      <para>
        Firewall script generated by fwbuilder for OpenWRT has format
        that allows it to be placed directly in
        the <emphasis>/etc/init.d/</emphasis> directory among other
        OpenWRT startup scripts. Its default name, however, is
        different from the name of the OpenWRT standard firewall
        script (which is <emphasis>"firewall"</emphasis>). Script
        generated by fwbuilder has
        name <emphasis>"firewall.fw"</emphasis> by default so it does
        not overwrite standard
        script <emphasis>"firewall"</emphasis>. This is done as a
        precaution since support for OpenWRT was only added in
        Firewall Builder v4.0 and we haven't accumulated enough
        experience with it. If you feel it works well and can be used
        as a replacement for the standard firewall script, just change
        the name of the script to <emphasis>"firewall"</emphasis> in
        the "Compiler" tab of the firewall settings
        dialog. Instructions in this section explain how to activate
        script generated by fwbuilder assuming it has default
        name <emphasis>"firewall.fw"</emphasis>. This way, the
        standard script is still going to be present on the firewall
        and you can always switch back to it.
      </para>
    </note>

    <para>
      Firewall Builder uses name <emphasis>"fwbuilder.fw"</emphasis>
      for the generated script for OpenWRT and places it in directory
      <emphasis>"/etc/init.d/"</emphasis> on the firewall. To make the
      firewall run it during boot sequence, install the script using
      built-in policy installer or copy it to this directory manually,
      then run command
    </para>

    <programlisting>
/etc/init.d/fwbuilder.fw enable
    </programlisting>

    <para>
      and disable standard firewall script:
    </para>

    <programlisting>
/etc/init.d/firewall disable
    </programlisting>

    <para>
      To activate the firewall and load policy generated by fwbuilder,
      use command
    </para>

    <programlisting>
/etc/init.d/fwbuilder.fw start
    </programlisting>

    <para>
      To stop the firewall and block all traffic use command
    </para>

    <programlisting>
/etc/init.d/fwbuilder.fw stop
    </programlisting>

    <para>
      An option in the "Compiler" tab of the firewall object in
      fwbuilder GUI alows you to make the firewall block all traffic
      when stopped but still permit ssh connections from preconfigured
      address of the management machine.  This method works both on
      stable Kamikaze (v7.06) and the latest OpenWRT (v8.09 at the
      time of Firewall Builder v4.0 release).
    </para>

    <para>
      In test mode fwbuilder copies generated firewall script to
      directory <emphasis>/tmp</emphasis> on the firewall.
    </para>
  </sect1>


  <sect1>
    <title>Integration with Sveasoft</title>

    <para>
    </para>
  </sect1>


  <sect1>
    <title>Integration with IPCOP</title>

    <para>
    </para>
  </sect1>


  
</chapter>
