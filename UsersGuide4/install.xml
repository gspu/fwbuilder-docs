<?xml version="1.0"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
                 "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">

  <chapter id="install">
    <title>Installing Firewall Builder</title>
    <sect1 id="installation">
      <title>RPM-based distributions (Red Hat, Fedora, OpenSUSE and others)</title>
      <para>Using pre-built binary RPMs</para>

      <para>You need to download and install two RPMs:</para>

      <itemizedlist>
	<listitem><para>Example: <filename>libfwbuilder-3.0.0-1.i386.rpm</filename>
	</para></listitem>
	<listitem><para>Example: <filename>fwbuilder-3.0.0-1.i386.rpm</filename>
	</para></listitem>
      </itemizedlist>

      <para>To satisfy dependencies, you need the following packages installed on your system:</para>

      <itemizedlist>
	<listitem><para>libxml2 v2.4.10 or newer
	</para></listitem>
	<listitem><para>libxslt v1.0.7 o newer
	</para></listitem>
	<listitem><para>ucd-snmp or net-snmp
	</para></listitem>
	<listitem><para>QT 4.3.x, 4.4.x Fwbuilder depends on QT 4.3 or 4.4, it will not work with 4.2
	</para></listitem>
      </itemizedlist>
	<para>Pre-built binary RPMs for RedHat Enterprise Linux 5 (RHEL 5) and CentOS 5.2</para>

	<para>These distributions do not come with QT4 and third-party
	binary RPMs of QT v4.3.x and 4.4.x are hard to come by. We
	distribute binary RPMs of Firewall Builder 3.0 statically
	linked with QT 4.4.1 for these distributions. These RPMs are
	posted in the downloads area on the SourceForge project
	site. These RPMs have the same standard
	names: <filename>libfwbuilder-3.0.0-1.i386.el5.rpm</filename>
	and <filename>fwbuilder-3.0.0-1.i386.el5.rpm</filename>, they
	just have no dependency on QT RPMs.</para>

	<para>If fwbuilder statically linked with QT crashes on start
	on your CentOS system, check if you have the following font
	packages installed: bitmap-fonts or
	bitstream-vera-fonts. Either one should make fwbuilder work
	(but we are told bitstream-vera fonts look better). See bug
	report <ulink url="http://sourceforge.net/tracker/?func=detail%26aid=2595205%26group_id=5314%26atid=1070394"><citetitle>#2595205</citetitle></ulink>
	on SourceForge for more details.</para>

      <para>To install Firewall Builder, go to your download directory
      and run the following command (replace the filenames with the
      names of the files you actually downloaded:</para>

      <screen>rpm -i libfwbuilder-3.0.0-1.i386.rpm fwbuilder-3.0.0-1.i386.rpm</screen>
    </sect1>

    <sect1 id="ubuntu">
      <title>Ubuntu Installation</title>
      <para>Using pre-built binary packages</para>
      
      <para>You need to download and install two packages: 

      <itemizedlist>
	<listitem><para>Example: <filename>libfwbuilder_3.0.4-b778-ubuntu-hardy-1_i386.deb</filename>
	</para></listitem>
	<listitem><para>Example: <filename>fwbuilder_3.0.4-b778-ubuntu-hardy-1_i386.deb</filename>
	</para></listitem>
      </itemizedlist></para>

      <para>To satisfy dependencies, you need the following packages installed on your system:</para>

      <itemizedlist>
	<listitem><para>QT 4.3.x, 4.4.x. Fwbuilder depends on QT 4.3 or 4.4, it will not work with 4.2
	</para></listitem>
      </itemizedlist>

      <para>You can get QT via your regular package manager.</para>

      <para>To install Firewall Builder, go to your download directory
      and run the following command (replace the filenames with the
      names of the files you actually downloaded:</para>

      <screen>dpkg -i libfwbuilder_3.0.4-b778-ubuntu-hardy-1_i386.deb \
	  fwbuilder_3.0.4-b778-ubuntu-hardy-1_i386.deb</screen>

    </sect1>


    <sect1 id="freebsd">
      <title>Installing FreeBSD and OpenBSD Ports</title>

      <para>Firewall Builder consists of two
      ports: <filename>/usr/ports/security/libfwbuilder</filename>
      and <filename>/usr/ports/security/fwbuilder</filename>. Once
      both ports are updated (it usually takes couple of weeks to
      update ports after the package is released), just install the
      port as usual using portinstall or issuing "make install"
      in <filename>/usr/ports/security/fwbuilder</filename>.</para>
    </sect1>


    <sect1 id="windows_install">
      <title>Windows Installation</title>

      <para>Double-click on the package file, then follow the
      step-by-step instructions in the installation wizard.</para>
    </sect1>


    <sect1 id="macosx_install">
      <title>Mac OS X Installation</title>

      <para>Mac OS X package is distributed in the form of a disk
      image ( .dmg file). Doubleclick on the image to mount it, then
      drag Firewall Builder application to your Applications folder
      (or any other place).</para>
    </sect1>


    <sect1 id="compile_from_source">
      <title>Compiling from Source</title>

      <para>Firewall Builder can be compiled and works on the
      following OS and distributions:</para>

    <para><itemizedlist spacing="compact">
        <listitem>
          <para>Debian Linux (including Ubuntu)</para>
        </listitem>

        <listitem>
          <para>Mandrake Linux</para>
        </listitem>

        <listitem>
          <para>RedHat Linux</para>
        </listitem>

        <listitem>
          <para>SuSE Linux</para>
        </listitem>

        <listitem>
          <para>Gentoo Linux</para>
        </listitem>

        <listitem>
          <para>FreeBSD</para>
        </listitem>

        <listitem>
          <para>OpenBSD</para>
        </listitem>

        <listitem>
          <para>Mac OS X</para>
        </listitem>

        <listitem>
          <para>Solaris</para>
        </listitem>
      </itemizedlist></para>

      <para>To compile from source, first download dependencies for your platform:</para>

      <para>For RedHat-based systems:</para>

      <itemizedlist spacing="compact">
        <listitem>
          <para>automake</para>
        </listitem>

        <listitem>
          <para>autoconf</para>
        </listitem>

        <listitem>
          <para>libtool</para>
        </listitem>

        <listitem>
          <para>libxml2-devel</para>
        </listitem>

        <listitem>
          <para>libxslt-devel</para>
        </listitem>

        <listitem>
          <para>net-snmp-devel</para>
        </listitem>

        <listitem>
          <para>qt</para>
        </listitem>

        <listitem>
          <para>qt-devel</para>
        </listitem>

        <listitem>
          <para>qt-x11</para>
        </listitem>
      </itemizedlist>

      <para>You may need to install packages elfutils-libelf and
      elfutils-libelf-devel (libelf on SuSE), otherwise libfwbuilder
      won't pick up net-snmp library even if it is installed.</para>

      <para>For Debian-based systems:</para>

      <itemizedlist spacing="compact">
        <listitem>
          <para>automake</para>
        </listitem>

        <listitem>
          <para>autoconf</para>
        </listitem>

        <listitem>
          <para>libtool</para>
        </listitem>

        <listitem>
          <para>libxml2-dev</para>
        </listitem>

        <listitem>
          <para>libxslt-dev</para>
        </listitem>

        <listitem>
          <para>libsnmp-dev</para>
        </listitem>

        <listitem>
          <para>libqt4-core</para>
        </listitem>

        <listitem>
          <para>libqt4-dev</para>
        </listitem>

        <listitem>
          <para>libqt4-gui</para>
        </listitem>

        <listitem>
          <para>qt4-dev-tools</para>
        </listitem>
      </itemizedlist>

      <para>Next, download source archives from SourceForge
      (libfwbuilder-3.0.0.tar.gz and fwbuilder-3.0.0.tar.gz, for
      example) and unpack them somewhere. Then build as
      follows:
      </para>

<screen>
cd libfwbuilder-&lt;version_number&gt;
./autogen.sh
make
make install

cd /fwbuilder-&lt;version_number&gt;
./autogen.sh
make
make install
</screen> 

    <note><title>Compilation may require other packages for RedHat and SuSE</title>

    <para>If you get errors that refer to missing autoconf macros
      while running autogen.sh for fwbuilder, check if your system has
      RPM gettext-devel. You may need to add other "development" RPMs
      besides these, but these two are often forgotten.</para>
    </note>

    <para>The configure scripts for both libfwbuilder and fwbuilder
      tries to find your QT4 installation in several more-or-less
      standard places. However, if you installed QT in a directory
      where the script can't find it, you can provide the path to it
      using the <parameter>--with-qtdir</parameter> option to script
      autogen.sh. This looks as follows:
    </para>

    <screen>
cd libfwbuilder-&lt;version_number&gt;
./autogen.sh --with-qtdir=/opt/qt4
make
make install
      
cd /fwbuilder-&lt;version_number&gt;
./autogen.sh --with-qtdir=/opt/qt4
make
make install
    </screen>           

    <para>
      By default script configure assumes prefix="/usr/local" and
      installs libfwbuilder libraries in /usr/local/lib and binaries
      in /usr/local/bin. Make sure /usr/local/lib is added to your
      LD_LIBRARY_PATH environment variable or to the /etc/ld.so.conf
      configuration file, otherwise the program won't find dynamic
      libraries there. Likewise, /usr/local/bin needs to be in your
      PATH.
    </para>

    <para>
      You can install libraries and binaries in a different place by
      specifying new prefix as follows:
    </para>

    <screen>
./autogen.sh --prefix="/opt"
    </screen>

    <para>
      This will install libraries
      in <filename class='directory'>/opt/lib</filename> and the
      program in <filename class='directory'>/opt/bin</filename>.
    </para> 

    </sect1>
  </chapter>
